# è¿˜åœ¨ä¿®æ”¹ï¼æ²¡æœ‰å®Œå·¥ï¼

# Star-Rail-AI-Auto-Battle

å´©åæ˜Ÿç©¹é“é“AIè‡ªåŠ¨æˆ˜æ–—ç³»ç»Ÿ

## ğŸ“– é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªä¸ºã€Šå´©åï¼šæ˜Ÿç©¹é“é“ã€‹æ¸¸æˆå¼€å‘çš„AIè‡ªåŠ¨æˆ˜æ–—ç³»ç»Ÿï¼Œä½¿ç”¨ Python å®ç°ï¼Œé›†æˆäº†å›¾åƒè¯†åˆ«ã€æ™ºèƒ½å†³ç­–å’Œæ¸¸æˆæ§åˆ¶åŠŸèƒ½ã€‚

## âš ï¸ å…è´£å£°æ˜

**æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’ŒæŠ€æœ¯ç ”ç©¶ä½¿ç”¨**
- è¯·éµå®ˆæ¸¸æˆæœåŠ¡æ¡æ¬¾
- ä¸è¦ç”¨äºå•†ä¸šç”¨é€”  
- ä½¿ç”¨æ—¶è¯·æ³¨æ„è´¦å·å®‰å…¨
- ä½œè€…ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- pip åŒ…ç®¡ç†å™¨
- Git

### å®‰è£…æ­¥éª¤

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/YSparkle/Star-Rail-AI-Auto-Battle.git
cd Star-Rail-AI-Auto-Battle

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
.venv\Scripts\activate
# Linux/Mac:
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### è¿è¡Œç¨‹åº

```bash
python main.py
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
Star-Rail-AI-Auto-Battle/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ image_recognition/    # å›¾åƒè¯†åˆ«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ recognizer.py
â”‚   â”œâ”€â”€ decision_engine/      # AIå†³ç­–å¼•æ“
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ decision.py
â”‚   â”œâ”€â”€ game_control/         # æ¸¸æˆæ§åˆ¶æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ controller.py
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â”‚   â””â”€â”€ æ–°æ‰‹å…¥é—¨æŒ‡å—.md
â”œâ”€â”€ main.py                   # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ requirements.txt          # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ PROJECT_PLAN.md          # é¡¹ç›®è®¡åˆ’
â””â”€â”€ README.md                # æœ¬æ–‡ä»¶
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

- **å›¾åƒè¯†åˆ«**: åŸºäº OpenCV çš„æ¸¸æˆç•Œé¢è¯†åˆ«
- **æ™ºèƒ½å†³ç­–**: åŸºäºè§„åˆ™çš„æˆ˜æ–—ç­–ç•¥ç³»ç»Ÿ
- **æ¸¸æˆæ§åˆ¶**: PyAutoGUI å®ç°çš„é¼ æ ‡é”®ç›˜æ¨¡æ‹Ÿ
- **æ—¥å¿—ç³»ç»Ÿ**: å®Œæ•´çš„è¿è¡Œæ—¥å¿—è®°å½•

## ğŸ“š æŠ€æœ¯æ ˆ

- **Python 3.8+**: ä¸»è¦ç¼–ç¨‹è¯­è¨€
- **OpenCV**: å›¾åƒå¤„ç†å’Œè¯†åˆ«
- **PyTorch**: æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ˆè§„åˆ’ä¸­ï¼‰
- **PyAutoGUI**: è‡ªåŠ¨åŒ–æ§åˆ¶
- **NumPy & Pandas**: æ•°æ®å¤„ç†
- **scikit-learn**: æœºå™¨å­¦ä¹ ï¼ˆè§„åˆ’ä¸­ï¼‰

## ğŸ“– æ–‡æ¡£

- [é¡¹ç›®è®¡åˆ’](PROJECT_PLAN.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

MIT License

---

## âš™ï¸ é…ç½® AI æä¾›å•†ä¸ç³»ç»Ÿæç¤ºè¯

ç¨‹åºé¦–æ¬¡è¿è¡Œä¼šåœ¨ config/config.json ç”Ÿæˆé…ç½®æ¨¡æ¿ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘è¯¥æ–‡ä»¶ï¼š

- ai.provider: å¯é€‰ mock/openai/azure/ollama/custom
- ai.api_key: ä½ çš„ API Keyï¼ˆå¦‚æœéœ€è¦ï¼‰
- ai.base_url: API åŸºç¡€åœ°å€ï¼ˆOpenAI å…¼å®¹æˆ–è‡ªå®šä¹‰ JSON æ¥å£ï¼‰
- ai.model: æ¨¡å‹åç§°ï¼ˆå¦‚ gpt-4o-mini/llama3 ç­‰ï¼‰
- ai.system_prompt: ç³»ç»Ÿæç¤ºè¯ï¼ˆç”¨äºæŒ‡å¯¼ AI åˆ¶å®šç­–ç•¥ï¼‰

ç¤ºä¾‹ï¼š

```
{
  "ai": {
    "provider": "openai",
    "api_key": "sk-...",
    "base_url": "https://api.openai.com/v1/chat/completions",
    "model": "gpt-4o-mini",
    "system_prompt": "ä½ æ˜¯æ˜Ÿç©¹é“é“æˆ˜æ–—ç­–åˆ’AIã€‚æ ¹æ®é˜Ÿä¼ä¸æ•Œäººä¿¡æ¯åˆ¶å®šæœ€ä¼˜ç­–ç•¥ã€‚"
  },
  "mode": "material_farm",
  "allow_rng_fishing": true
}
```

## ğŸ® æ¨¡å¼ä¸ç­–ç•¥ï¼ˆæŒ‰æ¨¡å¼åˆ†åˆ«è®¾è®¡ï¼‰

- material_farmï¼ˆåˆ·ææ–™ï¼‰ï¼šè¿½æ±‚å°‘è½®æ•°ä¸é«˜èŠ‚å¥ï¼Œæä¾›ä¸¤è½®/ä¸‰è½®ç­‰æ–¹æ¡ˆã€‚
- abyssï¼ˆæ·±æ¸Šï¼‰ï¼šç»“åˆå…³å¡ buff åˆ¶å®šæœ€å°‘è½®æ•°çš„ç¨³å®š/å¯å‡¹æ–¹æ¡ˆã€‚

ç¨‹åºä¼šï¼š
1. å¼•å¯¼ä½ æ‰‹åŠ¨æ‰“å¼€æ˜Ÿé“å¹¶åˆ‡æ¢åˆ°ç›®æ ‡æ¨¡å¼ï¼›
2. è¯»å– config ä¸­çš„é˜Ÿä¼ä¸æ•Œäººä¿¡æ¯ï¼Œè®¡ç®—æœ‰æ•ˆé¢æ¿ï¼›
3. ç”Ÿæˆå¤šå¥—ç­–ç•¥æ–¹æ¡ˆï¼ˆæœ¬åœ°ç»“æ„åŒ–+AI æ–‡æœ¬å»ºè®®ï¼‰ï¼Œä¾›ä½ é€‰æ‹©ï¼›
4. ä½ å¯ä»¥é€‰æ‹©æ˜¯å¦â€œå‡¹â€ï¼ˆè®©æ€ªç‰©æ‰“åˆ°æŒ‡å®šè§’è‰²ä»¥å›èƒ½ç­‰ï¼‰ã€‚

## ğŸ§  è®°å¿†ä¸æ•°æ®ä¿å­˜

- é»˜è®¤å¼€å¯æŒä¹…åŒ–ï¼ˆconfig.persist_memory=trueï¼‰ï¼Œæ•°æ®å†™å…¥ game_data/memory.jsonï¼š
  - ä¸Šæ¬¡é˜Ÿä¼/æ•Œäººä¿¡æ¯
  - AI æ–‡æœ¬å»ºè®®
  - ç”¨æˆ·é€‰æ‹©çš„æ–¹æ¡ˆ

## ğŸ§© é˜Ÿä¼ä¸é—å™¨è¾“å…¥

åœ¨ config/config.json å¡«å†™é˜Ÿä¼æ•°æ®ï¼ˆè§’è‰²ã€å…‰é”¥ã€é—å™¨ã€å¤©èµ‹ç­‰ï¼‰ï¼Œç¨‹åºä¼šè®¡ç®—æœ‰æ•ˆé¢æ¿ï¼š

```
"team": {
  "characters": [
    {
      "name": "ä¸¹æ’â€¢é¥®æœˆ",
      "path": "æ¯ç­",
      "element": "å†°",
      "level": 80,
      "eidolons": 0,
      "light_cone": {"name": "æŸæŸå…‰é”¥", "level": 80, "superimpose": 1, "stats": {"atk": 0, "hp": 0, "def": 0, "spd": 0, "crit_rate": 0.0, "crit_dmg": 0.0}},
      "base_stats": {"atk": 1000, "hp": 5000, "def": 600, "spd": 120, "crit_rate": 0.05, "crit_dmg": 0.5, "break_effect": 0.0, "energy_regen": 1.0},
      "relics": {"sets": ["å†°å¥—2", "æ”»å‡»2"], "stats": {"atk": 500, "spd": 12, "crit_rate": 0.2, "crit_dmg": 0.5}},
      "traces": {"atk_pct": 0.0, "hp_pct": 0.0, "def_pct": 0.0, "crit_rate": 0.0, "crit_dmg": 0.0, "spd": 0}
    }
  ]
}
```

æ•Œäººä¿¡æ¯ï¼ˆåŒ…å«å¼±ç‚¹ä¸å…³å¡ BUFFï¼‰ï¼š

```
"enemies": {"name": "æŸæŸ", "level": 80, "count": 3, "weakness": ["å†°"], "base_stats": {"hp": 20000, "def": 1000}, "special_buffs": []}
"abyss": {"buffs": [{"type": "å¢ä¼¤", "value": 0.2, "desc": "å†»ç»“ä¼¤å®³+20%"}]}
```
